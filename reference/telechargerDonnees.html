<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Télécharger des données sur le site de l'Insee — telechargerDonnees • doremifasol</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Télécharger des données sur le site de l'Insee — telechargerDonnees"><meta name="description" content="Télécharger des données sur le site de l'Insee"><meta property="og:description" content="Télécharger des données sur le site de l'Insee"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">doremifasol</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.6.0002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Accueil"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/donnees_dispo.html" aria-label="Données disponibles">Données disponibles</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html" aria-label="Fonctions">Fonctions</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/InseeFrLab/DoReMIFaSol/" aria-label="Contribuer"><span class="fa fab fa-github fa-lg"></span> Contribuer</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Télécharger des données sur le site de l'Insee</h1>
      <small class="dont-index">Source: <a href="https://github.com/InseeFrLab/DoReMIFaSol/blob/master/R/telechargerDonnees.R" class="external-link"><code>R/telechargerDonnees.R</code></a></small>
      <div class="d-none name"><code>telechargerDonnees.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Télécharger des données sur le site de l'Insee</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">telechargerDonnees</span><span class="op">(</span></span>
<span>  <span class="va">donnees</span>,</span>
<span>  date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  telDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"doremifasol.telDir"</span><span class="op">)</span>,</span>
<span>  argsApi <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-donnees">donnees<a class="anchor" aria-label="anchor" href="#arg-donnees"></a></dt>
<dd><p>le nom des données que l'on souhaite télécharger sur le site de l'Insee, que l'on peut retrouver dans la table <code><a href="liste_donnees.html">liste_donnees</a></code>.</p></dd>


<dt id="arg-date">date<a class="anchor" aria-label="anchor" href="#arg-date"></a></dt>
<dd><p>optionnel : le millésime des données si nécessaire. Peut prendre le format YYYY ou encore DD/MM/YYYY ; dans le dernier cas, on prendra le premier jour de la période de référence. Spécifier <code>"dernier"</code> sélectionne automatiquement le millésime le plus récent.</p></dd>


<dt id="arg-teldir">telDir<a class="anchor" aria-label="anchor" href="#arg-teldir"></a></dt>
<dd><p>optionnel : le dossier dans lequel sont téléchargées les données brutes. Par défaut, la valeur définie par <code>options(doremifasol.telDir = ...)</code>. Si l'utilisateur n'a pas défini cette valeur au préalable, un dossier temporaire de cache.</p></dd>


<dt id="arg-argsapi">argsApi<a class="anchor" aria-label="anchor" href="#arg-argsapi"></a></dt>
<dd><p>optionnel : dans le cas où c'est une API REST qui est utilisée, il est possible de spécifier des paramètres spécifiques à cette API de manière à collecter l'information désirée.</p></dd>


<dt id="arg-vars">vars<a class="anchor" aria-label="anchor" href="#arg-vars"></a></dt>
<dd><p>optionnel : un vecteur pour spécifier les variables à importer. Utile pour les données massives difficiles à charger en mémoire, voir section <em>Details</em>.</p></dd>


<dt id="arg-force">force<a class="anchor" aria-label="anchor" href="#arg-force"></a></dt>
<dd><p>forcer le téléchargement, même si le fichier a déjà été téléchargé (et est identique).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>paramètres additionnels relatifs à l'importation des données</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>

<ul><li><p>un data.frame contenant les données téléchargées sur le site de l'Insee</p></li>
<li><p>une liste de data.frames si recherche de Siren ou Siret via l'API</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>La fonction permet de télécharger les données disponibles sur le site de l'Insee sous format csv, xls ou encore xlsx. Les données mises à disposition sont en général des tables de taille raisonnable, qui peuvent être chargées sans problème en mémoire sur un large spectre de machines. Néanmoins, pour certaines données (telles celles du Recensement de Population ou encore SIRENE), les données sont très volumineuses et exigent donc des machines très performantes. L'utilisateur a donc la possibilité de choisir les variables qui l'intéressent et de ne charger que ces dernières en mémoire, de manière à être parcimonieux.</p>
    </div>
    <div class="section level2">
    <h2 id="fichiers-zip-de-grosse-taille">Fichiers zip de grosse taille<a class="anchor" aria-label="anchor" href="#fichiers-zip-de-grosse-taille"></a></h2>


<p>Pour tous les gros fichiers zip (repérés par la variable <code>big_zip = TRUE</code> dans les métadonnées), la fonction fait automatiquement appel à la fonction <code><a href="https://rdrr.io/r/utils/unzip.html" class="external-link">unzip</a></code> avec le paramètre <code>unzip = "unzip"</code>.
La commande unzip doit par conséquent être installée sur le poste de l'utilisateur (sur Windows, renseigner le chemin vers unzip dans la variable d'environnement %PATH%).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># fichiers sur insee.fr</span></span></span>
<span class="r-in"><span><span class="va">bpe_ens_2019</span> <span class="op">&lt;-</span> <span class="fu">telechargerDonnees</span><span class="op">(</span>donnees <span class="op">=</span> <span class="st">"BPE_ENS"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rp_log</span> <span class="op">&lt;-</span> <span class="fu">telechargerDonnees</span><span class="op">(</span><span class="st">"RP_LOGEMENT"</span>, date <span class="op">=</span> <span class="st">"2016"</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"COMMUNE"</span>, <span class="st">"IPONDL"</span>, <span class="st">"CATL"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># utilisation de l'API Sirene</span></span></span>
<span class="r-in"><span><span class="fu">telechargerDonnees</span><span class="op">(</span><span class="st">"SIRENE_SIREN"</span>,         </span></span>
<span class="r-in"><span>                   argsApi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q <span class="op">=</span> <span class="st">"dateCreationUniteLegale:2021-03-01"</span>, nombre <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">telechargerDonnees</span><span class="op">(</span><span class="st">"SIRENE_SIRET"</span>,         </span></span>
<span class="r-in"><span>                   argsApi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q <span class="op">=</span> <span class="st">"codeCommuneEtablissement:92046 </span></span></span>
<span class="r-in"><span><span class="st">                                       AND categorieJuridiqueUniteLegale:9220"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">telechargerDonnees</span><span class="op">(</span><span class="st">"SIRENE_SIRET_LIENS"</span>,   </span></span>
<span class="r-in"><span>                   argsApi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q <span class="op">=</span> <span class="st">"siretEtablissementPredecesseur:31300257800042"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">telechargerDonnees</span><span class="op">(</span><span class="st">"SIRENE_SIREN_NONDIFF"</span>, </span></span>
<span class="r-in"><span>                   argsApi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q <span class="op">=</span> <span class="st">"dateDernierTraitementUniteLegale:2019-04-15"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">telechargerDonnees</span><span class="op">(</span><span class="st">"SIRENE_SIRET_NONDIFF"</span>, argsApi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q <span class="op">=</span> <span class="st">"siren:480419449"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pierre Lamarche, Pierre-Yves Berrard.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

